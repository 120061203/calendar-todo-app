# ğŸ§ª æ¸¬è©¦æ–‡æª”

## ğŸ“‹ æ¦‚è¿°

é€™å€‹å°ˆæ¡ˆåŒ…å«å®Œæ•´çš„å‰ç«¯å’Œå¾Œç«¯æ¸¬è©¦å¥—ä»¶ï¼Œä½¿ç”¨ Jest ä½œç‚ºæ¸¬è©¦æ¡†æ¶ï¼ŒReact Testing Library ç”¨æ–¼å‰ç«¯æ¸¬è©¦ï¼ŒSupertest ç”¨æ–¼å¾Œç«¯ API æ¸¬è©¦ã€‚

## ğŸš€ å¿«é€Ÿé–‹å§‹

### é‹è¡Œæ‰€æœ‰æ¸¬è©¦

```bash
# åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œ
./run-tests.sh
```

### æ‰‹å‹•é‹è¡Œæ¸¬è©¦

#### å‰ç«¯æ¸¬è©¦
```bash
cd frontend
npm install  # å®‰è£ä¾è³´
npm test     # é‹è¡Œæ¸¬è©¦
```

#### å¾Œç«¯æ¸¬è©¦
```bash
cd backend
npm install  # å®‰è£ä¾è³´
npm test     # é‹è¡Œæ¸¬è©¦
```

## ğŸ“ æ¸¬è©¦çµæ§‹

```
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/__tests__/
â”‚   â”‚   â”‚   â”œâ”€â”€ TodoList.test.jsx      # å¾…è¾¦äº‹é …çµ„ä»¶æ¸¬è©¦
â”‚   â”‚   â”‚   â””â”€â”€ CalendarView.test.jsx  # è¡Œäº‹æ›†çµ„ä»¶æ¸¬è©¦
â”‚   â”‚   â””â”€â”€ __tests__/
â”‚   â”‚       â””â”€â”€ api.test.js            # API å‡½æ•¸æ¸¬è©¦
â”‚   â”œâ”€â”€ jest.config.js                 # Jest é…ç½®
â”‚   â””â”€â”€ src/setupTests.js              # æ¸¬è©¦è¨­ç½®
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ todos.test.js          # å¾…è¾¦äº‹é …è·¯ç”±æ¸¬è©¦
â”‚   â”‚   â”‚   â””â”€â”€ events.test.js         # äº‹ä»¶è·¯ç”±æ¸¬è©¦
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â””â”€â”€ logger.test.js         # æ—¥èªŒä¸­é–“ä»¶æ¸¬è©¦
â”‚   â”‚   â””â”€â”€ setup.js                   # å¾Œç«¯æ¸¬è©¦è¨­ç½®
â”‚   â””â”€â”€ jest.config.js                 # Jest é…ç½®
â””â”€â”€ run-tests.sh                       # æ¸¬è©¦é‹è¡Œè…³æœ¬
```

## ğŸ¯ æ¸¬è©¦è¦†è“‹ç¯„åœ

### å‰ç«¯æ¸¬è©¦

#### TodoList çµ„ä»¶
- âœ… **æ¸²æŸ“æ¸¬è©¦**: æ¨™é¡Œã€è¼¸å…¥æ¡†ã€å¾…è¾¦äº‹é …åˆ—è¡¨
- âœ… **æ–°å¢åŠŸèƒ½**: æ–°å¢å¾…è¾¦äº‹é …ã€å¸¶æ—¥æœŸçš„æ–°å¢
- âœ… **å®Œæˆç‹€æ…‹**: æ¨™è¨˜å®Œæˆ/æœªå®Œæˆ
- âœ… **åˆªé™¤åŠŸèƒ½**: å–®å€‹åˆªé™¤ã€æ‰¹é‡æ¸…é™¤å·²å®Œæˆ
- âœ… **è¦–è¦ºç‹€æ…‹**: å®Œæˆ/æœªå®Œæˆçš„æ¨£å¼
- âœ… **éŒ¯èª¤è™•ç†**: API éŒ¯èª¤ã€é©—è­‰éŒ¯èª¤
- âœ… **è¼‰å…¥ç‹€æ…‹**: è¼‰å…¥æŒ‡ç¤ºå™¨ã€æŒ‰éˆ•ç¦ç”¨

#### CalendarView çµ„ä»¶
- âœ… **æ¸²æŸ“æ¸¬è©¦**: æ¨™é¡Œã€æŒ‰éˆ•ã€è¡Œäº‹æ›†çµ„ä»¶
- âœ… **æ–°å¢äº‹ä»¶**: æ‰“é–‹å°è©±æ¡†ã€è¡¨å–®é©—è­‰
- âœ… **å¿«é€Ÿè¨­å®šæ™‚é•·**: 30åˆ†é˜ã€1å°æ™‚ã€2å°æ™‚ã€åŠå¤©
- âœ… **ç¾åœ¨æŒ‰éˆ•**: é–‹å§‹æ™‚é–“å’ŒçµæŸæ™‚é–“çš„ç¾åœ¨æŒ‰éˆ•
- âœ… **ç·¨è¼¯äº‹ä»¶**: é»æ“Šäº‹ä»¶ã€æ›´æ–°äº‹ä»¶
- âœ… **åˆªé™¤äº‹ä»¶**: åˆªé™¤ç¢ºèª
- âœ… **æ™‚é–“é©—è­‰**: çµæŸæ™‚é–“å¿…é ˆæ™šæ–¼é–‹å§‹æ™‚é–“
- âœ… **éŒ¯èª¤è™•ç†**: API éŒ¯èª¤ã€é©—è­‰éŒ¯èª¤
- âœ… **è¼‰å…¥ç‹€æ…‹**: è¼‰å…¥æŒ‡ç¤ºå™¨ã€æŒ‰éˆ•ç¦ç”¨

#### API å‡½æ•¸
- âœ… **å¾…è¾¦äº‹é … API**: GETã€POSTã€PUTã€DELETE
- âœ… **äº‹ä»¶ API**: GETã€POSTã€PUTã€DELETE
- âœ… **éŒ¯èª¤è™•ç†**: ç¶²è·¯éŒ¯èª¤ã€HTTP éŒ¯èª¤
- âœ… **æ•¸æ“šè™•ç†**: è¤‡é›œæ•¸æ“šçµæ§‹
- âœ… **URL é…ç½®**: æ­£ç¢ºçš„ API ç«¯é»

### å¾Œç«¯æ¸¬è©¦

#### å¾…è¾¦äº‹é …è·¯ç”±
- âœ… **GET /api/todos**: ç²å–æ‰€æœ‰å¾…è¾¦äº‹é …
- âœ… **POST /api/todos**: å‰µå»ºæ–°å¾…è¾¦äº‹é …
- âœ… **PUT /api/todos/:id**: æ›´æ–°å¾…è¾¦äº‹é …
- âœ… **DELETE /api/todos/:id**: åˆªé™¤å¾…è¾¦äº‹é …
- âœ… **é©—è­‰**: å¿…å¡«æ¬„ä½æª¢æŸ¥
- âœ… **éŒ¯èª¤è™•ç†**: è³‡æ–™åº«éŒ¯èª¤ã€404 éŒ¯èª¤

#### äº‹ä»¶è·¯ç”±
- âœ… **GET /api/events**: ç²å–æ‰€æœ‰äº‹ä»¶
- âœ… **POST /api/events**: å‰µå»ºæ–°äº‹ä»¶
- âœ… **PUT /api/events/:id**: æ›´æ–°äº‹ä»¶
- âœ… **DELETE /api/events/:id**: åˆªé™¤äº‹ä»¶
- âœ… **é©—è­‰**: å¿…å¡«æ¬„ä½æª¢æŸ¥
- âœ… **éŒ¯èª¤è™•ç†**: è³‡æ–™åº«éŒ¯èª¤ã€404 éŒ¯èª¤

#### ä¸­é–“ä»¶
- âœ… **Logger ä¸­é–“ä»¶**: è«‹æ±‚è¨˜éŒ„ã€éŸ¿æ‡‰è¨˜éŒ„
- âœ… **è«‹æ±‚è¨˜éŒ„**: æ–¹æ³•ã€è·¯å¾‘ã€è«‹æ±‚é«”
- âœ… **éŸ¿æ‡‰è¨˜éŒ„**: ç‹€æ…‹ç¢¼ã€éŸ¿æ‡‰æ•¸æ“š
- âœ… **éŒ¯èª¤è™•ç†**: ç„¡æ•ˆ JSONã€ç•°å¸¸æƒ…æ³

## ğŸ› ï¸ æ¸¬è©¦å‘½ä»¤

### åŸºæœ¬æ¸¬è©¦
```bash
npm test                    # é‹è¡Œæ‰€æœ‰æ¸¬è©¦
npm test -- --watch        # ç›£è¦–æ¨¡å¼
npm test -- --coverage     # ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
npm test -- --verbose      # è©³ç´°è¼¸å‡º
```

### ç‰¹å®šæ¸¬è©¦
```bash
npm test -- --testNamePattern="TodoList"  # é‹è¡Œç‰¹å®šæ¸¬è©¦
npm test -- --testPathPattern="api"       # é‹è¡Œç‰¹å®šè·¯å¾‘çš„æ¸¬è©¦
```

### è¦†è“‹ç‡å ±å‘Š
```bash
npm test -- --coverage --coverageReporters=html
```

## ğŸ“Š æ¸¬è©¦è¦†è“‹ç‡

æ¸¬è©¦è¦†è“‹ç‡å ±å‘Šæœƒç”Ÿæˆåœ¨ä»¥ä¸‹ç›®éŒ„ï¼š
- **å‰ç«¯**: `frontend/coverage/`
- **å¾Œç«¯**: `backend/coverage/`

è¦†è“‹ç‡åŒ…æ‹¬ï¼š
- **èªå¥è¦†è“‹ç‡**: åŸ·è¡Œçš„ç¨‹å¼ç¢¼è¡Œæ•¸
- **åˆ†æ”¯è¦†è“‹ç‡**: åŸ·è¡Œçš„æ¢ä»¶åˆ†æ”¯
- **å‡½æ•¸è¦†è“‹ç‡**: åŸ·è¡Œçš„å‡½æ•¸
- **è¡Œè¦†è“‹ç‡**: åŸ·è¡Œçš„ç¨‹å¼ç¢¼è¡Œ

## ğŸ”§ æ¸¬è©¦é…ç½®

### å‰ç«¯ Jest é…ç½®
```javascript
// frontend/jest.config.js
module.exports = {
  testEnvironment: 'jsdom',           // DOM ç’°å¢ƒ
  setupFilesAfterEnv: ['<rootDir>/src/setupTests.js'],
  moduleNameMapping: {                // è·¯å¾‘æ˜ å°„
    '^@/(.*)$': '<rootDir>/src/$1',
  },
  collectCoverageFrom: [              // è¦†è“‹ç‡æ”¶é›†ç¯„åœ
    'src/**/*.{js,jsx}',
    '!src/main.jsx',
  ],
  testTimeout: 10000,                 // æ¸¬è©¦è¶…æ™‚æ™‚é–“
};
```

### å¾Œç«¯ Jest é…ç½®
```javascript
// backend/jest.config.js
module.exports = {
  testEnvironment: 'node',            // Node.js ç’°å¢ƒ
  testMatch: [                        // æ¸¬è©¦æ–‡ä»¶åŒ¹é…
    '<rootDir>/__tests__/**/*.test.js',
  ],
  collectCoverageFrom: [              // è¦†è“‹ç‡æ”¶é›†ç¯„åœ
    'routes/**/*.js',
    'middleware/**/*.js',
  ],
  testTimeout: 10000,                 // æ¸¬è©¦è¶…æ™‚æ™‚é–“
};
```

## ğŸ§¹ æ¸¬è©¦æ¸…ç†

### æ¸…ç†æ¸¬è©¦æ–‡ä»¶
```bash
# æ¸…ç†è¦†è“‹ç‡å ±å‘Š
rm -rf frontend/coverage/
rm -rf backend/coverage/

# æ¸…ç†æ¸¬è©¦å¿«ç…§
npm test -- --clearCache
```

### é‡ç½®æ¸¬è©¦æ•¸æ“š
æ¸¬è©¦ä½¿ç”¨æ¨¡æ“¬æ•¸æ“šï¼Œä¸æœƒå½±éŸ¿å¯¦éš›è³‡æ–™åº«ã€‚å¦‚æœéœ€è¦é‡ç½®æ¸¬è©¦ç’°å¢ƒï¼š

```bash
# æ¸…ç† Jest å¿«å–
npx jest --clearCache

# é‡æ–°å®‰è£ä¾è³´
rm -rf node_modules/
npm install
```

## ğŸ› å¸¸è¦‹å•é¡Œ

### æ¸¬è©¦å¤±æ•—
1. **æª¢æŸ¥ä¾è³´**: ç¢ºä¿æ‰€æœ‰æ¸¬è©¦ä¾è³´å·²å®‰è£
2. **æª¢æŸ¥é…ç½®**: é©—è­‰ Jest é…ç½®æ–‡ä»¶
3. **æª¢æŸ¥è·¯å¾‘**: ç¢ºä¿æ¸¬è©¦æ–‡ä»¶è·¯å¾‘æ­£ç¢º
4. **æª¢æŸ¥æ¨¡æ“¬**: é©—è­‰ Mock è¨­ç½®

### è¦†è“‹ç‡ç‚º 0
1. **æª¢æŸ¥é…ç½®**: é©—è­‰ `collectCoverageFrom` è¨­ç½®
2. **æª¢æŸ¥è·¯å¾‘**: ç¢ºä¿æºæ–‡ä»¶è·¯å¾‘æ­£ç¢º
3. **æª¢æŸ¥æ’é™¤**: é©—è­‰æ²’æœ‰éåº¦æ’é™¤æ–‡ä»¶

### æ¸¬è©¦è¶…æ™‚
1. **å¢åŠ è¶…æ™‚æ™‚é–“**: åœ¨ Jest é…ç½®ä¸­è¨­ç½® `testTimeout`
2. **æª¢æŸ¥ç•°æ­¥**: ç¢ºä¿æ­£ç¢ºè™•ç† Promise å’Œ async/await
3. **æª¢æŸ¥æ¨¡æ“¬**: é©—è­‰ Mock å‡½æ•¸çš„éŸ¿æ‡‰æ™‚é–“

## ğŸ“š æœ€ä½³å¯¦è¸

### æ¸¬è©¦çµ„ç¹”
- ä½¿ç”¨æè¿°æ€§çš„æ¸¬è©¦åç¨±
- æŒ‰åŠŸèƒ½åˆ†çµ„æ¸¬è©¦
- ä½¿ç”¨ `beforeEach` å’Œ `afterEach` æ¸…ç†
- ä¿æŒæ¸¬è©¦ç¨ç«‹æ€§

### æ¸¬è©¦æ•¸æ“š
- ä½¿ç”¨å·¥å» å‡½æ•¸å‰µå»ºæ¸¬è©¦æ•¸æ“š
- é¿å…ç¡¬ç·¨ç¢¼çš„æ¸¬è©¦æ•¸æ“š
- ä½¿ç”¨éš¨æ©Ÿæ•¸æ“šé¿å…æ¸¬è©¦ä¾è³´

### æ¨¡æ“¬ç­–ç•¥
- æ¨¡æ“¬å¤–éƒ¨ä¾è³´ï¼ˆAPIã€è³‡æ–™åº«ï¼‰
- æ¨¡æ“¬è¤‡é›œçš„ç¬¬ä¸‰æ–¹åº«
- ä½¿ç”¨çœŸå¯¦çš„ç”¨æˆ¶äº‹ä»¶æ¨¡æ“¬

### æ–·è¨€ç­–ç•¥
- æ¸¬è©¦è¡Œç‚ºè€Œéå¯¦ç¾
- ä½¿ç”¨èªç¾©åŒ–çš„æ–·è¨€
- é¿å…éåº¦æ–·è¨€
- æ¸¬è©¦éŒ¯èª¤æƒ…æ³

## ğŸš€ æŒçºŒæ•´åˆ

### GitHub Actions
```yaml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '18'
      - run: npm ci
      - run: npm test
      - run: npm test -- --coverage
```

### é æäº¤é‰¤å­
```json
// package.json
{
  "husky": {
    "hooks": {
      "pre-commit": "npm test"
    }
  }
}
```

## ğŸ“ æ”¯æ´

å¦‚æœé‡åˆ°æ¸¬è©¦å•é¡Œï¼š

1. **æª¢æŸ¥æ—¥èªŒ**: æŸ¥çœ‹æ¸¬è©¦è¼¸å‡ºå’ŒéŒ¯èª¤è¨Šæ¯
2. **æª¢æŸ¥é…ç½®**: é©—è­‰ Jest å’Œæ¸¬è©¦é…ç½®
3. **æª¢æŸ¥ä¾è³´**: ç¢ºä¿æ‰€æœ‰æ¸¬è©¦ä¾è³´å·²å®‰è£
4. **æª¢æŸ¥ç‰ˆæœ¬**: é©—è­‰ Node.js å’Œ npm ç‰ˆæœ¬

---

**æ¸¬è©¦æ˜¯ä»£ç¢¼è³ªé‡çš„é‡è¦ä¿éšœï¼Œå®šæœŸé‹è¡Œæ¸¬è©¦å¯ä»¥åŠæ—©ç™¼ç¾å•é¡Œä¸¦ç¢ºä¿åŠŸèƒ½æ­£å¸¸é‹ä½œã€‚**
